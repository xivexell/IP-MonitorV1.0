# üìã Tutorial Completo: Despliegue con MySQL - Aplicaci√≥n de Monitoreo de Red

## üéØ Objetivo
Desplegar la aplicaci√≥n de monitoreo de red con base de datos MySQL en un servidor Debian GNU/Linux 11 (bullseye) para uso en producci√≥n empresarial.

## üìã Requisitos Previos
- Servidor Debian 11 con acceso SSH
- Usuario con privilegios sudo
- Conexi√≥n a internet estable
- Dominio o IP p√∫blica (opcional para HTTPS)
- M√≠nimo 2GB RAM y 20GB espacio en disco

**Datos del Servidor:**
- IP del Servidor: `10.0.1.9`
- Repositorio GitHub: `https://github.com/xivexell/IP-MonitorV1.0`

---

## üöÄ PASO 1: Preparaci√≥n del Servidor

### 1.1 Actualizar el Sistema
```bash
# Conectarse al servidor via SSH
ssh usuario@10.0.1.9

# Actualizar la lista de paquetes
sudo apt update

# Actualizar todos los paquetes instalados
sudo apt upgrade -y

# Instalar herramientas b√°sicas
sudo apt install -y curl wget git unzip software-properties-common apt-transport-https ca-certificates gnupg lsb-release build-essential
```

### 1.2 Configurar el Firewall (UFW)
```bash
# Instalar UFW si no est√° instalado
sudo apt install -y ufw

# Configurar reglas b√°sicas
sudo ufw default deny incoming
sudo ufw default allow outgoing

# Permitir SSH (IMPORTANTE: no bloquear tu conexi√≥n actual)
sudo ufw allow ssh
sudo ufw allow 22

# Permitir HTTP y HTTPS
sudo ufw allow 80
sudo ufw allow 443

# Permitir MySQL (solo desde localhost por seguridad)
sudo ufw allow from 127.0.0.1 to any port 3306

# Habilitar el firewall
sudo ufw enable

# Verificar el estado
sudo ufw status
```

---

## üóÑÔ∏è PASO 2: Instalaci√≥n y Configuraci√≥n de MySQL

### 2.1 Instalar MySQL Server
```bash
# Instalar MySQL Server
sudo apt install -y mysql-server

# Verificar que MySQL est√© ejecut√°ndose
sudo systemctl status mysql

# Habilitar MySQL para que inicie autom√°ticamente
sudo systemctl enable mysql
```

### 2.2 Configurar Seguridad de MySQL
```bash
# Ejecutar script de seguridad
sudo mysql_secure_installation

# Responder las preguntas:
# - Validate Password Plugin: Y (recomendado)
# - Password Strength: 2 (STRONG)
# - Remove anonymous users: Y
# - Disallow root login remotely: Y
# - Remove test database: Y
# - Reload privilege tables: Y
```

### 2.3 Crear Base de Datos y Usuario
```bash
# Conectar a MySQL como root
sudo mysql -u root -p

# Ejecutar los siguientes comandos SQL:
```

```sql
-- Crear base de datos
CREATE DATABASE network_monitor_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- Crear usuario espec√≠fico para la aplicaci√≥n
CREATE USER 'network_monitor'@'localhost' IDENTIFIED BY 'secure_password_2024';

-- Otorgar permisos completos sobre la base de datos
GRANT ALL PRIVILEGES ON network_monitor_db.* TO 'network_monitor'@'localhost';

-- Aplicar cambios
FLUSH PRIVILEGES;

-- Verificar la creaci√≥n
SHOW DATABASES;
SELECT User, Host FROM mysql.user WHERE User = 'network_monitor';

-- Salir de MySQL
EXIT;
```

### 2.4 Verificar Conexi√≥n
```bash
# Probar conexi√≥n con el nuevo usuario
mysql -u network_monitor -p network_monitor_db

# Si la conexi√≥n es exitosa, salir
EXIT;
```

### 2.5 Configurar MySQL para Producci√≥n
```bash
# Editar configuraci√≥n de MySQL
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf
```

**Agregar/modificar las siguientes l√≠neas:**
```ini
[mysqld]
# Configuraciones de rendimiento
innodb_buffer_pool_size = 512M
innodb_log_file_size = 128M
innodb_flush_log_at_trx_commit = 2
innodb_flush_method = O_DIRECT

# Configuraciones de conexi√≥n
max_connections = 200
connect_timeout = 60
wait_timeout = 28800
interactive_timeout = 28800

# Configuraciones de seguridad
bind-address = 127.0.0.1
skip-networking = 0
local-infile = 0

# Configuraciones de logs
log_error = /var/log/mysql/error.log
slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow.log
long_query_time = 2

# Configuraciones de charset
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci
```

```bash
# Reiniciar MySQL para aplicar cambios
sudo systemctl restart mysql

# Verificar que MySQL est√© funcionando
sudo systemctl status mysql
```

---

## üü¢ PASO 3: Instalaci√≥n de Node.js

### 3.1 Instalar Node.js 18 LTS
```bash
# Descargar e instalar NodeSource repository
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -

# Instalar Node.js
sudo apt install -y nodejs

# Verificar la instalaci√≥n
node --version
npm --version

# Deber√≠a mostrar algo como:
# v18.x.x
# 9.x.x
```

### 3.2 Instalar PM2 (Gestor de Procesos)
```bash
# Instalar PM2 globalmente
sudo npm install -g pm2

# Verificar la instalaci√≥n
pm2 --version
```

---

## üåê PASO 4: Instalaci√≥n y Configuraci√≥n de Nginx

### 4.1 Instalar Nginx
```bash
# Instalar Nginx
sudo apt install -y nginx

# Iniciar y habilitar Nginx
sudo systemctl start nginx
sudo systemctl enable nginx

# Verificar el estado
sudo systemctl status nginx
```

### 4.2 Configurar Nginx para la Aplicaci√≥n
```bash
# Crear archivo de configuraci√≥n para la aplicaci√≥n
sudo nano /etc/nginx/sites-available/network-monitor
```

**Contenido del archivo `/etc/nginx/sites-available/network-monitor`:**
```nginx
# Configuraci√≥n para aplicaci√≥n de monitoreo de red
server {
    listen 80;
    server_name 10.0.1.9;  # IP del servidor
    
    # Configuraci√≥n de logs
    access_log /var/log/nginx/network-monitor.access.log;
    error_log /var/log/nginx/network-monitor.error.log;
    
    # Configuraci√≥n de seguridad
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header Referrer-Policy "no-referrer-when-downgrade" always;
    add_header Content-Security-Policy "default-src 'self' http: https: data: blob: 'unsafe-inline'" always;
    
    # Configuraci√≥n principal - proxy a la aplicaci√≥n Node.js
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        proxy_read_timeout 86400;
        proxy_connect_timeout 60;
        proxy_send_timeout 60;
    }
    
    # Configuraci√≥n para archivos est√°ticos (si se sirven desde Nginx)
    location /static/ {
        alias /var/www/network-monitor/dist/;
        expires 1y;
        add_header Cache-Control "public, immutable";
        gzip_static on;
    }
    
    # Configuraci√≥n para archivos de assets
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        proxy_pass http://localhost:3000;
        expires 1y;
        add_header Cache-Control "public, immutable";
        gzip_static on;
    }
    
    # Configuraci√≥n para la API
    location /api/ {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        proxy_read_timeout 300;
        proxy_connect_timeout 60;
        proxy_send_timeout 60;
    }
    
    # Configuraci√≥n para health check
    location /api/health {
        proxy_pass http://localhost:3000;
        access_log off;
    }
    
    # Configuraci√≥n de compresi√≥n
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types
        text/plain
        text/css
        text/xml
        text/javascript
        application/json
        application/javascript
        application/xml+rss
        application/atom+xml
        image/svg+xml;
}
```

### 4.3 Activar la Configuraci√≥n
```bash
# Crear enlace simb√≥lico para activar el sitio
sudo ln -s /etc/nginx/sites-available/network-monitor /etc/nginx/sites-enabled/

# Desactivar el sitio por defecto (opcional)
sudo rm /etc/nginx/sites-enabled/default

# Verificar la configuraci√≥n de Nginx
sudo nginx -t

# Si todo est√° correcto, recargar Nginx
sudo systemctl reload nginx
```

---

## üìÅ PASO 5: Preparaci√≥n de la Aplicaci√≥n

### 5.1 Crear Directorio de la Aplicaci√≥n
```bash
# Crear directorio para la aplicaci√≥n
sudo mkdir -p /var/www/network-monitor

# Cambiar propietario del directorio
sudo chown -R $USER:$USER /var/www/network-monitor

# Navegar al directorio
cd /var/www/network-monitor
```

### 5.2 Clonar la Aplicaci√≥n desde GitHub
```bash
# Clonar el repositorio desde GitHub
git clone https://github.com/xivexell/IP-MonitorV1.0.git .

# Verificar que se clon√≥ correctamente
ls -la

# Deber√≠a mostrar los archivos del proyecto:
# - package.json
# - server/
# - src/
# - README.md
# - etc.
```

### 5.3 Configurar Variables de Entorno
```bash
# Copiar el archivo de ejemplo
cp .env.example .env

# Editar el archivo de variables de entorno
nano .env
```

**Contenido del archivo `.env`:**
```env
# Configuraci√≥n de la Base de Datos MySQL
DB_HOST=localhost
DB_PORT=3306
DB_USER=network_monitor
DB_PASSWORD=secure_password_2024
DB_NAME=network_monitor_db

# Configuraci√≥n del Servidor
PORT=3000
NODE_ENV=production

# URL del Frontend (para CORS en producci√≥n)
FRONTEND_URL=http://10.0.1.9

# Configuraci√≥n de Seguridad
JWT_SECRET=tu_clave_secreta_jwt_muy_segura_cambiar_en_produccion

# Configuraci√≥n de Email (opcional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=tu-email@gmail.com
SMTP_PASS=tu-contrase√±a-de-aplicacion

# Configuraci√≥n de Telegram (opcional)
TELEGRAM_BOT_TOKEN=tu_token_de_bot_telegram
TELEGRAM_CHAT_ID=tu_chat_id_telegram

# Configuraci√≥n de Logs
LOG_LEVEL=info
LOG_FILE=logs/app.log
```

### 5.4 Instalar Dependencias y Construir la Aplicaci√≥n
```bash
# Asegurarse de estar en el directorio correcto
cd /var/www/network-monitor

# Instalar dependencias
npm install

# Construir la aplicaci√≥n para producci√≥n
npm run build

# Verificar que se cre√≥ la carpeta dist
ls -la dist/

# Crear directorio para logs
mkdir -p logs
```

---

## üîß PASO 6: Configuraci√≥n del Servidor de Producci√≥n

### 6.1 Verificar la Estructura del Proyecto
```bash
# Verificar que todos los archivos est√©n en su lugar
ls -la

# Deber√≠a mostrar:
# - server/ (directorio del backend)
# - dist/ (aplicaci√≥n frontend compilada)
# - package.json
# - .env
# - node_modules/
```

### 6.2 Probar la Aplicaci√≥n Localmente
```bash
# Probar que la aplicaci√≥n inicie correctamente
npm start

# Deber√≠a mostrar:
# ‚úÖ Base de datos inicializada correctamente
# üöÄ Servidor ejecut√°ndose en puerto 3000
# üì° Servicio de ping autom√°tico iniciado

# Presionar Ctrl+C para detener
```

### 6.3 Verificar Conexi√≥n a la Base de Datos
```bash
# Verificar que las tablas se crearon correctamente
mysql -u network_monitor -p network_monitor_db

# Ejecutar en MySQL:
SHOW TABLES;

# Deber√≠a mostrar:
# +--------------------------------+
# | Tables_in_network_monitor_db   |
# +--------------------------------+
# | alerts                         |
# | devices                        |
# | migrations                     |
# | ping_history                   |
# | settings                       |
# +--------------------------------+

# Salir de MySQL
EXIT;
```

---

## üîÑ PASO 7: Configuraci√≥n de PM2

### 7.1 Crear Archivo de Configuraci√≥n PM2
```bash
# Crear archivo de configuraci√≥n PM2
nano ecosystem.config.js
```

**Contenido del archivo `ecosystem.config.js`:**
```javascript
module.exports = {
  apps: [{
    name: 'network-monitor',
    script: 'server/index.js',
    instances: 'max',
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    env_production: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    error_file: '/var/log/pm2/network-monitor-error.log',
    out_file: '/var/log/pm2/network-monitor-out.log',
    log_file: '/var/log/pm2/network-monitor.log',
    time: true,
    max_memory_restart: '1G',
    node_args: '--max-old-space-size=1024',
    watch: false,
    ignore_watch: ['node_modules', 'logs', 'dist'],
    restart_delay: 4000,
    max_restarts: 10,
    min_uptime: '10s'
  }]
};
```

### 7.2 Configurar Logs de PM2
```bash
# Crear directorio para logs de PM2
sudo mkdir -p /var/log/pm2
sudo chown -R $USER:$USER /var/log/pm2
```

### 7.3 Iniciar la Aplicaci√≥n con PM2
```bash
# Iniciar la aplicaci√≥n
pm2 start ecosystem.config.js --env production

# Verificar el estado
pm2 status

# Ver logs en tiempo real
pm2 logs network-monitor

# Guardar configuraci√≥n de PM2
pm2 save

# Configurar PM2 para iniciarse autom√°ticamente
pm2 startup
# Ejecutar el comando que PM2 te proporcione (algo como):
# sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u $USER --hp $HOME
```

---

## üîí PASO 8: Configuraci√≥n de HTTPS con Let's Encrypt (Opcional)

### 8.1 Instalar Certbot
```bash
# Instalar snapd
sudo apt install -y snapd

# Instalar certbot
sudo snap install --classic certbot

# Crear enlace simb√≥lico
sudo ln -s /snap/bin/certbot /usr/bin/certbot
```

### 8.2 Obtener Certificado SSL (Solo si tienes dominio)
```bash
# Si tienes un dominio apuntando a 10.0.1.9, puedes obtener certificado SSL
# sudo certbot --nginx -d tu-dominio.com

# Para IP directa, HTTPS no es necesario en red interna
# La aplicaci√≥n funcionar√° perfectamente con HTTP en http://10.0.1.9
```

---

## üìä PASO 9: Configuraci√≥n de Monitoreo y Logs

### 9.1 Configurar Rotaci√≥n de Logs
```bash
# Crear configuraci√≥n para logrotate
sudo nano /etc/logrotate.d/network-monitor
```

**Contenido del archivo:**
```
/var/log/pm2/network-monitor*.log {
    daily
    missingok
    rotate 52
    compress
    delaycompress
    notifempty
    create 644 $USER $USER
    postrotate
        pm2 reloadLogs
    endscript
}

/var/www/network-monitor/logs/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 $USER $USER
}
```

### 9.2 Configurar Backup Autom√°tico de Base de Datos
```bash
# Crear script de backup
sudo nano /usr/local/bin/backup-network-monitor.sh
```

**Contenido del script:**
```bash
#!/bin/bash

# Configuraci√≥n
DB_NAME="network_monitor_db"
DB_USER="network_monitor"
DB_PASS="secure_password_2024"
BACKUP_DIR="/var/backups/network-monitor"
DATE=$(date +%Y%m%d_%H%M%S)

# Crear directorio de backup si no existe
mkdir -p $BACKUP_DIR

# Realizar backup de la base de datos
mysqldump -u $DB_USER -p$DB_PASS $DB_NAME > $BACKUP_DIR/db_backup_$DATE.sql

# Comprimir backup
gzip $BACKUP_DIR/db_backup_$DATE.sql

# Eliminar backups antiguos (mantener solo los √∫ltimos 7 d√≠as)
find $BACKUP_DIR -name "db_backup_*.sql.gz" -mtime +7 -delete

echo "Backup completado: $BACKUP_DIR/db_backup_$DATE.sql.gz"
```

```bash
# Hacer el script ejecutable
sudo chmod +x /usr/local/bin/backup-network-monitor.sh

# Configurar cron para backup diario
sudo crontab -e

# Agregar la siguiente l√≠nea:
0 2 * * * /usr/local/bin/backup-network-monitor.sh >> /var/log/backup-network-monitor.log 2>&1
```

---

## üìã PASO 10: Verificaci√≥n y Pruebas

### 10.1 Lista de Verificaci√≥n Completa
```bash
# ‚úÖ Verificar que MySQL est√° ejecut√°ndose
sudo systemctl status mysql

# ‚úÖ Verificar que Nginx est√° ejecut√°ndose
sudo systemctl status nginx

# ‚úÖ Verificar que PM2 est√° ejecut√°ndose
pm2 status

# ‚úÖ Verificar que la aplicaci√≥n responde
curl -I http://localhost:3000/api/health

# ‚úÖ Verificar logs sin errores
pm2 logs network-monitor --lines 50

# ‚úÖ Verificar conexi√≥n a base de datos
mysql -u network_monitor -p network_monitor_db -e "SELECT COUNT(*) FROM settings;"

# ‚úÖ Verificar acceso desde navegador
# Abrir http://10.0.1.9 en tu navegador
```

### 10.2 Pruebas de Funcionalidad
1. **Acceder a la aplicaci√≥n** desde un navegador web en `http://10.0.1.9`
2. **Agregar un dispositivo** para monitorear
3. **Verificar que los datos se guardan** en MySQL:
   ```bash
   mysql -u network_monitor -p network_monitor_db -e "SELECT * FROM devices;"
   ```
4. **Verificar que las alertas funcionan** correctamente
5. **Generar un reporte** PDF/Excel
6. **Configurar las opciones** en la p√°gina de configuraci√≥n
7. **Verificar el historial de pings** en la base de datos:
   ```bash
   mysql -u network_monitor -p network_monitor_db -e "SELECT COUNT(*) FROM ping_history;"
   ```

---

## üîß PASO 11: Comandos de Administraci√≥n

### 11.1 Comandos √ötiles de PM2
```bash
# Ver estado de todas las aplicaciones
pm2 status

# Reiniciar la aplicaci√≥n
pm2 restart network-monitor

# Parar la aplicaci√≥n
pm2 stop network-monitor

# Ver logs
pm2 logs network-monitor

# Ver m√©tricas en tiempo real
pm2 monit

# Recargar la aplicaci√≥n sin downtime
pm2 reload network-monitor

# Ver informaci√≥n detallada
pm2 describe network-monitor
```

### 11.2 Comandos √ötiles de MySQL
```bash
# Conectar a la base de datos
mysql -u network_monitor -p network_monitor_db

# Backup manual
mysqldump -u network_monitor -p network_monitor_db > backup_$(date +%Y%m%d).sql

# Restaurar backup
mysql -u network_monitor -p network_monitor_db < backup_20241201.sql

# Ver estad√≠sticas de la base de datos
mysql -u network_monitor -p network_monitor_db -e "
SELECT 
  table_name,
  table_rows,
  ROUND(((data_length + index_length) / 1024 / 1024), 2) AS 'Size (MB)'
FROM information_schema.tables 
WHERE table_schema = 'network_monitor_db';"
```

### 11.3 Comandos √ötiles de Nginx
```bash
# Verificar configuraci√≥n
sudo nginx -t

# Recargar configuraci√≥n
sudo systemctl reload nginx

# Reiniciar Nginx
sudo systemctl restart nginx

# Ver logs de acceso
sudo tail -f /var/log/nginx/network-monitor.access.log

# Ver logs de errores
sudo tail -f /var/log/nginx/network-monitor.error.log
```

---

## üîÑ PASO 12: Actualizaci√≥n de la Aplicaci√≥n

### 12.1 Script de Actualizaci√≥n
```bash
# Crear script de actualizaci√≥n
nano update-app.sh
```

**Contenido del archivo `update-app.sh`:**
```bash
#!/bin/bash

echo "üîÑ Iniciando actualizaci√≥n de la aplicaci√≥n..."

# Navegar al directorio de la aplicaci√≥n
cd /var/www/network-monitor

# Hacer backup de la versi√≥n actual
echo "üì¶ Creando backup..."
sudo cp -r /var/www/network-monitor /var/backups/network-monitor-$(date +%Y%m%d-%H%M%S)

# Hacer backup de la base de datos
echo "üíæ Creando backup de base de datos..."
mysqldump -u network_monitor -p$DB_PASSWORD network_monitor_db > /var/backups/db_backup_$(date +%Y%m%d-%H%M%S).sql

# Actualizar c√≥digo desde GitHub
echo "üì• Descargando actualizaciones desde GitHub..."
git pull origin main

# Instalar nuevas dependencias
echo "üì¶ Instalando dependencias..."
npm install

# Construir nueva versi√≥n
echo "üî® Construyendo aplicaci√≥n..."
npm run build

# Reiniciar aplicaci√≥n con PM2
echo "üîÑ Reiniciando aplicaci√≥n..."
pm2 reload network-monitor

# Verificar que la aplicaci√≥n est√© funcionando
echo "üîç Verificando estado..."
sleep 5
pm2 status

echo "‚úÖ Actualizaci√≥n completada!"
echo "üåê La aplicaci√≥n est√° disponible en: http://10.0.1.9"
echo "üìä Health check: http://10.0.1.9/api/health"
```

### 12.2 Hacer el Script Ejecutable
```bash
# Hacer ejecutable
chmod +x update-app.sh

# Ejecutar actualizaci√≥n
./update-app.sh
```

---

## üõ°Ô∏è PASO 13: Configuraciones de Seguridad Adicionales

### 13.1 Configurar Fail2Ban
```bash
# Instalar Fail2Ban
sudo apt install -y fail2ban

# Crear configuraci√≥n personalizada
sudo nano /etc/fail2ban/jail.local
```

**Contenido de `/etc/fail2ban/jail.local`:**
```ini
[DEFAULT]
bantime = 3600
findtime = 600
maxretry = 5

[sshd]
enabled = true
port = ssh
logpath = /var/log/auth.log
maxretry = 3

[nginx-http-auth]
enabled = true
port = http,https
logpath = /var/log/nginx/network-monitor.error.log

[mysql]
enabled = true
port = 3306
logpath = /var/log/mysql/error.log
maxretry = 3
```

```bash
# Reiniciar Fail2Ban
sudo systemctl restart fail2ban
sudo systemctl enable fail2ban
```

### 13.2 Configurar Actualizaciones Autom√°ticas de Seguridad
```bash
# Instalar unattended-upgrades
sudo apt install -y unattended-upgrades

# Configurar actualizaciones autom√°ticas
sudo dpkg-reconfigure -plow unattended-upgrades
```

---

## üÜò PASO 14: Soluci√≥n de Problemas Comunes

### 14.1 La aplicaci√≥n no carga
```bash
# Verificar logs de PM2
pm2 logs network-monitor

# Verificar logs de Nginx
sudo tail -f /var/log/nginx/network-monitor.error.log

# Verificar que el puerto 3000 est√° en uso
sudo netstat -tlnp | grep :3000

# Verificar conexi√≥n a MySQL
mysql -u network_monitor -p network_monitor_db -e "SELECT 1;"
```

### 14.2 Error de conexi√≥n a MySQL
```bash
# Verificar que MySQL est√© ejecut√°ndose
sudo systemctl status mysql

# Verificar logs de MySQL
sudo tail -f /var/log/mysql/error.log

# Verificar usuario y permisos
mysql -u root -p -e "SELECT User, Host FROM mysql.user WHERE User = 'network_monitor';"

# Verificar variables de entorno
cat .env | grep DB_
```

### 14.3 Error 502 Bad Gateway
```bash
# Verificar que PM2 est√° ejecut√°ndose
pm2 status

# Reiniciar la aplicaci√≥n
pm2 restart network-monitor

# Verificar configuraci√≥n de Nginx
sudo nginx -t

# Verificar logs de la aplicaci√≥n
pm2 logs network-monitor --lines 100
```

### 14.4 Problemas de Rendimiento
```bash
# Verificar uso de recursos
htop

# Verificar estad√≠sticas de MySQL
mysql -u network_monitor -p network_monitor_db -e "SHOW PROCESSLIST;"

# Verificar logs lentos de MySQL
sudo tail -f /var/log/mysql/slow.log

# Optimizar tablas de MySQL
mysql -u network_monitor -p network_monitor_db -e "OPTIMIZE TABLE devices, ping_history, alerts;"
```

---

## üìû Informaci√≥n de Contacto y Soporte

**Desarrollado por:** Ing. Jaime Ballesteros S.  
**Cargo:** Jefe Div. Infraestructura Tecnol√≥gica  
**Versi√≥n:** 1.0.0 con MySQL  
**Repositorio:** https://github.com/xivexell/IP-MonitorV1.0  
**Servidor:** 10.0.1.9

---

## üìù Notas Importantes

### üîê Seguridad
1. **Cambiar contrase√±as por defecto** en `.env`
2. **Configurar firewall** correctamente
3. **Mantener MySQL actualizado**
4. **Usar HTTPS** si tienes dominio
5. **Configurar backups autom√°ticos**

### üìä Rendimiento
1. **Monitorear uso de recursos** regularmente
2. **Optimizar consultas MySQL** si es necesario
3. **Configurar √≠ndices** apropiados
4. **Limpiar datos antiguos** peri√≥dicamente

### üîß Mantenimiento
1. **Backup diario** de base de datos
2. **Rotaci√≥n de logs** configurada
3. **Actualizaciones de seguridad** autom√°ticas
4. **Monitoreo de espacio en disco**

### üìà Escalabilidad
- La aplicaci√≥n puede manejar **cientos de dispositivos**
- Para m√°s de **1000 dispositivos**, considerar:
  - Servidor dedicado para MySQL
  - Load balancer con m√∫ltiples instancias
  - Optimizaci√≥n de base de datos

### üåê Acceso a la Aplicaci√≥n
- **URL Principal:** http://10.0.1.9
- **API Health Check:** http://10.0.1.9/api/health
- **Repositorio GitHub:** https://github.com/xivexell/IP-MonitorV1.0

---

¬°Tu aplicaci√≥n de monitoreo de red con MySQL ya est√° lista para producci√≥n empresarial! üéâ

## üöÄ Pr√≥ximos Pasos Recomendados

1. **Configurar monitoreo** con Grafana + Prometheus
2. **Implementar alertas por email/Telegram** reales
3. **Configurar cluster MySQL** para alta disponibilidad
4. **Implementar autenticaci√≥n de usuarios**
5. **Agregar dashboard de administraci√≥n**

## üìã Resumen de URLs y Comandos Importantes

### üîó URLs de Acceso
- **Aplicaci√≥n Principal:** http://10.0.1.9
- **Health Check:** http://10.0.1.9/api/health

### üì¶ Repositorio
- **GitHub:** https://github.com/xivexell/IP-MonitorV1.0
- **Clone:** `git clone https://github.com/xivexell/IP-MonitorV1.0.git`

### üñ•Ô∏è Servidor
- **IP:** 10.0.1.9
- **SSH:** `ssh usuario@10.0.1.9`

### ‚ö° Comandos R√°pidos
```bash
# Ver estado de la aplicaci√≥n
pm2 status

# Ver logs en tiempo real
pm2 logs network-monitor

# Reiniciar aplicaci√≥n
pm2 restart network-monitor

# Verificar MySQL
mysql -u network_monitor -p network_monitor_db

# Actualizar desde GitHub
cd /var/www/network-monitor && git pull origin main
```